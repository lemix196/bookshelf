{% extends 'base.html' %}

{% block content %}
<!-- Formularz wyszukiwania -->
<form method="POST" action="{% url 'book-search' %}">
    {% csrf_token %}

<!-- Opcje wyboru rodzaju filtrowania -->
    <label for="search_by">Search book by:</label>
    <select id="search_by" name="search_by">
        <option value="book_title">Tytul ksiazki</option>
        <option value="auagethor">Autor</option>
        <option value="publ_language">Jezyk publikacji</option>
        <option value="publ_date">Data publikacji</option>
    </select>

<!-- Wprowadzenie frazy do wyszukania -->
    <input type="search" placeholder="Search for book" name="searched">
    <button type="submit">Szukaj</button>

</form>
<!-- Koniec formularza wyszukiwania -->


<hr/>


<!-- Tabela ksiazek pobierana z bazy danych -->
<table border="1" align="center" cellpadding="12px">

<!-- Pobranie nazw kolumn z bazy danych jako naglowkow tabeli -->
    <tr>
    {% for field in model_fields %}
        {% if field.name != "id" %}
        <th>
        {{ field.name }}
        </th>
        {% endif %}
    {% endfor %}
    </tr>


<!-- 'Petla for dodajaca w kazdym kroku wiersz tabeli z pojedynczym rekordem bedacym kolejna linia z bazy danych -->
{% for book in all_books %}

    <tr>
        <td>{{ book.book_title }}</td>
        <td>{{ book.author }}</td>
        <td>{{ book.publ_date }}</td>
        <td>{{ book.ISBN_number }}</td>
        <td>{{ book.page_count }}</td>
        <td><a href="{{ book.cover_URL }}">COVER URL</a></td>
        <td>{{ book.publ_language }}</td>
    </tr>

{% endfor %}

</table>
<!-- Koniec tabeli ksiazek pobieranej z bazy danych -->
{% endblock content %}